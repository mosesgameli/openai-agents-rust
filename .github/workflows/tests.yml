name: Tests

on:
    push:
        branches:
            - main
    pull_request:

env:
    CARGO_TERM_COLOR: always

jobs:
    lint:
        name: Lint & Format
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v6
            - name: Install Rust
              uses: dtolnay/rust-toolchain@stable
              with:
                  components: rustfmt, clippy
            - name: Check Formatting
              run: cargo fmt -- --check
            - name: Run Clippy
              run: cargo clippy -- -D warnings

    test:
        name: Test
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v6
            - name: Install Rust
              uses: dtolnay/rust-toolchain@stable
            - name: Run Tests
              run: cargo test --workspace

    docs:
        name: Build Docs
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v6
            - name: Install Rust
              uses: dtolnay/rust-toolchain@stable
            - name: Build Documentation
              run: cargo doc --no-deps --workspace
